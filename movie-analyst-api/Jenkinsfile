node {
    stage('Checkout scm') {
        checkout scm
    }

    stage('Run test') {
        dir ("${env-WORKSPACE/movie-analyst-api}") {
            docker.image('node:10.11.0-alpine').inside() {
                echo 'Performing tests'
                sh 'cd movie-analyst-api'
                sh 'npm install'
                sh 'npm test'
            }
        }
    }

    stage('Build docker image') {
        echo "Not yet"
    }
}