node {
    stage('Checkout scm') {
        checkout scm
    }

    stage('Run test') {
        docker.image('node:10.11.0-alpine').inside() {
            echo 'Performing tests'
            sh 'cd movie-analyst-api'
            sh 'npm install ./movie-analyst-api/'
            sh 'npm test ./movie-analyst-api/'
        }
    }

    stage('Build docker image') {
        echo "Not yet"
    }
}