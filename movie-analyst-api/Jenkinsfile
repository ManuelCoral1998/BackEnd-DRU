node {
    stage('Checkout scm') {
        checkout scm
    }

    stage('Run test') {
        docker.image('node:10.11.0-alpine').withRun() { c ->
            sh 'sudo apt-get update && sudo apt-get install -y npm'
            echo 'Performing tests'
            sh 'npm install --only=dev'
            sh 'npm test'
        }
    }

    stage('Build docker image') {
        echo "Not yet"
    }
}